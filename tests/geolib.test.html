<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

	<meta charset="utf-8">
	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/qunit/git/qunit.js"></script>
	<script type="text/javascript" src="../geolib.js"></script>
	<link rel="stylesheet" href="http://code.jquery.com/qunit/git/qunit.css" type="text/css" media="screen" />

<script>
$(function(){

	test("Calculating distance using getDistance()", function() {

		expect(3);

		var distance1 = geolib.getDistance({latitude: 52.518611, longitude: 13.408056}, {latitude: 51.519475, longitude: 7.46694444});
		var distance2 = geolib.getDistance({latitude: 52.518611, longitude: 13.408056}, {latitude: 51.519475, longitude: 7.46694444}, 100);
		var distance3 = geolib.getDistance({latitude: 37.774514, longitude: -122.418079}, {latitude: 51.519475, longitude: 7.46694444});

		equal(distance1, 422592, "Distance 1 should be 422592" );
		equal(distance2, 422600, "Distance 2 should be 422600" );
		equal(distance3, 8980260, "Distance 3 should be 8980260" );

	});

	test("Calculating distance using getDistanceSimple()", function() {

		expect(3);

		var distance1 = geolib.getDistanceSimple({latitude: 52.518611, longitude: 13.408056}, {latitude: 51.519475, longitude: 7.46694444});
		var distance2 = geolib.getDistanceSimple({latitude: 52.518611, longitude: 13.408056}, {latitude: 51.519475, longitude: 7.46694444}, 100);
		var distance3 = geolib.getDistanceSimple({latitude: 37.774514, longitude: -122.418079}, {latitude: 51.519475, longitude: 7.46694444});

		equal(distance1, 421786, "Distance 1 should be 421786" );
		equal(distance2, 421800, "Distance 2 should be 421800" );
		equal(distance3, 8967172, "Distance 3 should be 8967172" );

	});

	test("Conversion from sexagesimal to decimal", function() {

		expect(7);

		var dec1 = geolib.useDecimal("51° 31' 10.11\" N");
		var dec2 = geolib.useDecimal("7° 28' 01\" E");
		var dec3 = geolib.useDecimal("19°    22'   32\"      S");
		var dec4 = geolib.useDecimal("71° 3'     34\" W");
		var dec5 = geolib.useDecimal("71°3'W");
		var dec6 = geolib.useDecimal("51.519475");
		var dec7 = geolib.useDecimal("-122.418079");

		equal(dec1, 51.519475, "Decimal value should be 51.519475" );
		equal(dec2, 7.46694444, "Decimal value should be 7.46694444" );
		equal(dec3, -19.37555556, "Decimal value should be -19.37555556" );
		equal(dec4, -71.05944444, "Decimal value should be -71.05944444" );
		equal(dec5, -71.05, "Decimal value should be -71.05" );
		equal(dec6, 51.519475, "Decimal value should be 51.519475" );
		equal(dec7, -122.418079, "Decimal value should be -122.418079" );

	});

	test("Conversion from decimal to sexagesimal", function() {

		expect(2);
		var sexa1 = geolib.decimal2sexagesimal(51.519475);
		var sexa2 = geolib.decimal2sexagesimal(-19.37555556);

		equal(sexa1, '51° 31\' 10.11"', "Decimal value should be 51° 31' 10.11\"" );
		equal(sexa2, '19° 22\' 32.00"', "Decimal value should be 19° 22' 32\" S" );

	});

	test("Testing compass direction", function() {

		expect(2);
		var dir1 = geolib.getCompassDirection({latitude: 52.518611, longitude: 13.408056}, {latitude: 51.519475, longitude: 7.46694444});

		equal(dir1.rough, 'W', 'Should be west');
		equal(dir1.exact, 'WSW', 'Should be west-south-west');

	});

});
</script>

</head>
<body>
<h1 id="qunit-header">Geolib Unittests</h1>
<h2 id="qunit-banner"></h2>
<!--<div id="qunit-testrunner-toolbar"></div>-->
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>
</body>
</html>